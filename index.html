<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image-Recognition Calculator</title>
    <link rel="icon" type="image/svg+xml" href="/icons/calculator.svg">
</head>
<body class="bg-gray-50 min-h-screen">
    <div id="app" class="container mx-auto px-4 py-8 max-w-md">
        <!-- Header -->
        <header class="text-center mb-6">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">Calculator</h1>
            <p class="text-gray-600 text-sm">Type or upload an image</p>
        </header>

        <!-- Calculator Display -->
        <div class="bg-white rounded-2xl shadow-lg p-6 mb-6">
            <!-- Expression Line -->
            <div id="expression" class="text-right text-gray-500 text-lg mb-2 min-h-[1.5rem]">
                &nbsp;
            </div>
            
            <!-- Result Line -->
            <div id="result" class="text-right text-gray-800 text-4xl font-semibold mb-4 min-h-[3rem]">
                0
            </div>

            <!-- Image Upload Section -->
            <div id="imageSection" class="hidden mb-4 p-4 bg-gray-50 rounded-lg">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-sm font-medium text-gray-700">Image Preview</h3>
                    <button id="removeImage" class="text-red-500 hover:text-red-700 text-sm">
                        Remove
                    </button>
                </div>
                <div class="flex items-center space-x-3">
                    <img id="imagePreview" class="w-16 h-16 object-cover rounded border" alt="Math expression">
                    <button id="solveFromImage" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        Solve from Image
                    </button>
                </div>
                <div id="ocrStatus" class="hidden mt-2 text-sm text-gray-600"></div>
            </div>

            <!-- Camera Button -->
            <div class="flex justify-center mb-4">
                <label for="imageInput" class="cursor-pointer bg-gray-100 hover:bg-gray-200 p-3 rounded-full transition-colors">
                    <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                </label>
                <input id="imageInput" type="file" accept="image/*" class="hidden">
            </div>
        </div>

        <!-- Calculator Buttons -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
            <div class="grid grid-cols-4 gap-3">
                <!-- Row 1 -->
                <button class="calc-btn bg-gray-100 hover:bg-gray-200" data-action="clear">
                    AC
                </button>
                <button class="calc-btn bg-gray-100 hover:bg-gray-200" data-action="toggleSign">
                    ±
                </button>
                <button class="calc-btn bg-gray-100 hover:bg-gray-200" data-action="percent">
                    %
                </button>
                <button class="calc-btn bg-red-500 hover:bg-red-600 text-white" data-action="operator" data-operator="÷">
                    ÷
                </button>

                <!-- Row 2 -->
                <button class="calc-btn bg-gray-50 hover:bg-gray-100" data-action="digit" data-digit="7">
                    7
                </button>
                <button class="calc-btn bg-gray-50 hover:bg-gray-100" data-action="digit" data-digit="8">
                    8
                </button>
                <button class="calc-btn bg-gray-50 hover:bg-gray-100" data-action="digit" data-digit="9">
                    9
                </button>
                <button class="calc-btn bg-red-500 hover:bg-red-600 text-white" data-action="operator" data-operator="×">
                    ×
                </button>

                <!-- Row 3 -->
                <button class="calc-btn bg-gray-50 hover:bg-gray-100" data-action="digit" data-digit="4">
                    4
                </button>
                <button class="calc-btn bg-gray-50 hover:bg-gray-100" data-action="digit" data-digit="5">
                    5
                </button>
                <button class="calc-btn bg-gray-50 hover:bg-gray-100" data-action="digit" data-digit="6">
                    6
                </button>
                <button class="calc-btn bg-red-500 hover:bg-red-600 text-white" data-action="operator" data-operator="-">
                    −
                </button>

                <!-- Row 4 -->
                <button class="calc-btn bg-gray-50 hover:bg-gray-100" data-action="digit" data-digit="1">
                    1
                </button>
                <button class="calc-btn bg-gray-50 hover:bg-gray-100" data-action="digit" data-digit="2">
                    2
                </button>
                <button class="calc-btn bg-gray-50 hover:bg-gray-100" data-action="digit" data-digit="3">
                    3
                </button>
                <button class="calc-btn bg-red-500 hover:bg-red-600 text-white" data-action="operator" data-operator="+">
                    +
                </button>

                <!-- Row 5 -->
                <button class="calc-btn bg-gray-50 hover:bg-gray-100 col-span-2" data-action="digit" data-digit="0">
                    0
                </button>
                <button class="calc-btn bg-gray-50 hover:bg-gray-100" data-action="dot">
                    .
                </button>
                <button class="calc-btn bg-red-500 hover:bg-red-600 text-white" data-action="equals">
                    =
                </button>
            </div>
        </div>

        <!-- OCR History -->
        <div id="ocrHistory" class="hidden mt-6 bg-white rounded-2xl shadow-lg p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">Recent Expressions</h3>
            <div id="historyList" class="space-y-2"></div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
            <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"></div>
            <span class="text-gray-700">Reading expression...</span>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <script type="module" src="/src/main.js"></script>
</body>
</html>

